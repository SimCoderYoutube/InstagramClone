{"ast":null,"code":"import { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport debounce from 'debounce';\nimport findNodeHandle from \"../../exports/findNodeHandle\";\nvar emptyObject = {};\nvar registry = {};\nvar id = 1;\n\nvar guid = function guid() {\n  return \"r-\" + id++;\n};\n\nvar resizeObserver;\n\nif (canUseDOM) {\n  if (typeof window.ResizeObserver !== 'undefined') {\n    resizeObserver = new window.ResizeObserver(function (entries) {\n      entries.forEach(function (_ref) {\n        var target = _ref.target;\n        var instance = registry[target._layoutId];\n        instance && instance._handleLayout();\n      });\n    });\n  } else {\n    if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n      console.warn('onLayout relies on ResizeObserver which is not supported by your browser. ' + 'Please include a polyfill, e.g., https://github.com/que-etc/resize-observer-polyfill. ' + 'Falling back to window.onresize.');\n    }\n\n    var triggerAll = function triggerAll() {\n      Object.keys(registry).forEach(function (key) {\n        var instance = registry[key];\n\n        instance._handleLayout();\n      });\n    };\n\n    window.addEventListener('resize', debounce(triggerAll, 16), false);\n  }\n}\n\nvar observe = function observe(instance) {\n  var id = guid();\n  registry[id] = instance;\n\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      node._layoutId = id;\n      resizeObserver.observe(node);\n    }\n  } else {\n    instance._layoutId = id;\n\n    instance._handleLayout();\n  }\n};\n\nvar unobserve = function unobserve(instance) {\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      delete registry[node._layoutId];\n      delete node._layoutId;\n      resizeObserver.unobserve(node);\n    }\n  } else {\n    delete registry[instance._layoutId];\n    delete instance._layoutId;\n  }\n};\n\nvar safeOverride = function safeOverride(original, next) {\n  if (original) {\n    return function prototypeOverride() {\n      original.call(this, arguments);\n      next.call(this, arguments);\n    };\n  }\n\n  return next;\n};\n\nvar applyLayout = function applyLayout(Component) {\n  var componentDidMount = Component.prototype.componentDidMount;\n  var componentDidUpdate = Component.prototype.componentDidUpdate;\n  var componentWillUnmount = Component.prototype.componentWillUnmount;\n  Component.prototype.componentDidMount = safeOverride(componentDidMount, function componentDidMount() {\n    this._layoutState = emptyObject;\n    this._isMounted = true;\n\n    if (this.props.onLayout) {\n      observe(this);\n    }\n  });\n  Component.prototype.componentDidUpdate = safeOverride(componentDidUpdate, function componentDidUpdate(prevProps) {\n    if (this.props.onLayout && !prevProps.onLayout) {\n      observe(this);\n    } else if (!this.props.onLayout && prevProps.onLayout) {\n      unobserve(this);\n    }\n  });\n  Component.prototype.componentWillUnmount = safeOverride(componentWillUnmount, function componentWillUnmount() {\n    this._isMounted = false;\n\n    if (this.props.onLayout) {\n      unobserve(this);\n    }\n  });\n\n  Component.prototype._handleLayout = function () {\n    var _this = this;\n\n    var layout = this._layoutState;\n    var onLayout = this.props.onLayout;\n\n    if (onLayout) {\n      this.measure(function (x, y, width, height) {\n        if (_this._isMounted) {\n          if (layout.x !== x || layout.y !== y || layout.width !== width || layout.height !== height) {\n            _this._layoutState = {\n              x: x,\n              y: y,\n              width: width,\n              height: height\n            };\n            var nativeEvent = {\n              layout: _this._layoutState\n            };\n            Object.defineProperty(nativeEvent, 'target', {\n              enumerable: true,\n              get: function get() {\n                return findNodeHandle(_this);\n              }\n            });\n            onLayout({\n              nativeEvent: nativeEvent,\n              timeStamp: Date.now()\n            });\n          }\n        }\n      });\n    }\n  };\n\n  return Component;\n};\n\nexport default applyLayout;","map":{"version":3,"sources":["/home/simcoder/Desktop/InstagramClone/node_modules/react-native-web/dist/modules/applyLayout/index.js"],"names":["canUseDOM","debounce","findNodeHandle","emptyObject","registry","id","guid","resizeObserver","window","ResizeObserver","entries","forEach","_ref","target","instance","_layoutId","_handleLayout","process","env","NODE_ENV","console","warn","triggerAll","Object","keys","key","addEventListener","observe","node","unobserve","safeOverride","original","next","prototypeOverride","call","arguments","applyLayout","Component","componentDidMount","prototype","componentDidUpdate","componentWillUnmount","_layoutState","_isMounted","props","onLayout","prevProps","_this","layout","measure","x","y","width","height","nativeEvent","defineProperty","enumerable","get","timeStamp","Date","now"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport debounce from 'debounce';\nimport findNodeHandle from '../../exports/findNodeHandle';\nvar emptyObject = {};\nvar registry = {};\nvar id = 1;\n\nvar guid = function guid() {\n  return \"r-\" + id++;\n};\n\nvar resizeObserver;\n\nif (canUseDOM) {\n  if (typeof window.ResizeObserver !== 'undefined') {\n    resizeObserver = new window.ResizeObserver(function (entries) {\n      entries.forEach(function (_ref) {\n        var target = _ref.target;\n        var instance = registry[target._layoutId];\n        instance && instance._handleLayout();\n      });\n    });\n  } else {\n    if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test') {\n      console.warn('onLayout relies on ResizeObserver which is not supported by your browser. ' + 'Please include a polyfill, e.g., https://github.com/que-etc/resize-observer-polyfill. ' + 'Falling back to window.onresize.');\n    }\n\n    var triggerAll = function triggerAll() {\n      Object.keys(registry).forEach(function (key) {\n        var instance = registry[key];\n\n        instance._handleLayout();\n      });\n    };\n\n    window.addEventListener('resize', debounce(triggerAll, 16), false);\n  }\n}\n\nvar observe = function observe(instance) {\n  var id = guid();\n  registry[id] = instance;\n\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      node._layoutId = id;\n      resizeObserver.observe(node);\n    }\n  } else {\n    instance._layoutId = id;\n\n    instance._handleLayout();\n  }\n};\n\nvar unobserve = function unobserve(instance) {\n  if (resizeObserver) {\n    var node = findNodeHandle(instance);\n\n    if (node) {\n      delete registry[node._layoutId];\n      delete node._layoutId;\n      resizeObserver.unobserve(node);\n    }\n  } else {\n    delete registry[instance._layoutId];\n    delete instance._layoutId;\n  }\n};\n\nvar safeOverride = function safeOverride(original, next) {\n  if (original) {\n    return function prototypeOverride() {\n      /* eslint-disable prefer-rest-params */\n      original.call(this, arguments);\n      next.call(this, arguments);\n      /* eslint-enable prefer-rest-params */\n    };\n  }\n\n  return next;\n};\n\nvar applyLayout = function applyLayout(Component) {\n  var componentDidMount = Component.prototype.componentDidMount;\n  var componentDidUpdate = Component.prototype.componentDidUpdate;\n  var componentWillUnmount = Component.prototype.componentWillUnmount;\n  Component.prototype.componentDidMount = safeOverride(componentDidMount, function componentDidMount() {\n    this._layoutState = emptyObject;\n    this._isMounted = true;\n\n    if (this.props.onLayout) {\n      observe(this);\n    }\n  });\n  Component.prototype.componentDidUpdate = safeOverride(componentDidUpdate, function componentDidUpdate(prevProps) {\n    if (this.props.onLayout && !prevProps.onLayout) {\n      observe(this);\n    } else if (!this.props.onLayout && prevProps.onLayout) {\n      unobserve(this);\n    }\n  });\n  Component.prototype.componentWillUnmount = safeOverride(componentWillUnmount, function componentWillUnmount() {\n    this._isMounted = false;\n\n    if (this.props.onLayout) {\n      unobserve(this);\n    }\n  });\n\n  Component.prototype._handleLayout = function () {\n    var _this = this;\n\n    var layout = this._layoutState;\n    var onLayout = this.props.onLayout;\n\n    if (onLayout) {\n      this.measure(function (x, y, width, height) {\n        if (_this._isMounted) {\n          if (layout.x !== x || layout.y !== y || layout.width !== width || layout.height !== height) {\n            _this._layoutState = {\n              x: x,\n              y: y,\n              width: width,\n              height: height\n            };\n            var nativeEvent = {\n              layout: _this._layoutState\n            };\n            Object.defineProperty(nativeEvent, 'target', {\n              enumerable: true,\n              get: function get() {\n                return findNodeHandle(_this);\n              }\n            });\n            onLayout({\n              nativeEvent: nativeEvent,\n              timeStamp: Date.now()\n            });\n          }\n        }\n      });\n    }\n  };\n\n  return Component;\n};\n\nexport default applyLayout;"]},"metadata":{},"sourceType":"module"}